<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="xdmvc.html">

<polymer-element name="xdmvc-connection" attributes="server reconnect port deviceId ajaxPort architecture">
	<script>
		Polymer({
			created: function() {
                XDmvc.init(this.reconnect);
                this.url = document.location.hostname;
                this.port = XDmvc.port;
                this.ajaxPort = XDmvc.ajaxPort;
                this.reconnect = XDmvc.reconnect;
                this.deviceId = XDmvc.deviceId;
                this.architecture = XDmvc.network_architecture;
			},

			domReady: function(){
                if (this.architecture === XDmvc.clientServer) {
                    XDmvc.setClientServer();
                }
                XDmvc.reconnect = this.reconnect;
				XDmvc.connectToServer(this.url, this.port, undefined, this.ajaxPort);
			},
		  
			changeDeviceId: function(newID){
                XDmvc.changeDeviceId(newID);
			}
		});
	</script>
</polymer-element>
